" .ideavimrc is a configuration file for IdeaVim plugin. It uses
"   the same commands as the original .vimrc configuration.
" You can find a list of commands here: https://jb.gg/h38q75
" Find more examples here: https://jb.gg/share-ideavimrc
let mapleader=" "

""" Plugins  --------------------------------
set surround
set commentary
set argtextobj
" Hint: Use lowercase letters to jump with easymotion
" https://stackoverflow.com/questions/60491336/why-ideavim-easymotion-plugin-for-pycharm-selects-the-text-between-cursors-inste
set easymotion
set notimeout
set textobj-entire
set ReplaceWithRegister
set exchange
set highlightedyank
set nerdtree
set which-key
set vim-commentary

""" Plugin settings -------------------------
let g:argtextobj_pairs="[:],(:),<:>"

""" Common settings -------------------------
set showmode
set showcmd
set number relativenumber
set so=5
set history=1000
set incsearch
set hlsearch
set ignorecase
set smartcase
set visualbell
set clipboard^=unnamedplus,unnamed
set nu

""" Idea specific settings ------------------
set ideajoin
set ideastatusicon=gray

""" Key Mappings -----------------------------
" See more keymaps in https://www.cyberwizard.io/posts/the-ultimate-ideavim-setup/

inoremap jk <Esc>
map <leader>f <Plug>(easymotion-s)
map <leader>e <Plug>(easymotion-f)

" Tab navigation
nnoremap <A-n> :tabnext<CR>
nnoremap <A-p> :tabprev<CR>\

" Clear search highlights
nmap <ESC> :nohlsearch<CR>

" NERDTree
" Doc: https://github.com/JetBrains/ideavim/wiki/NERDTree-support
nmap <leader>nt :NERDTreeToggle<CR>
nmap <C-n> :NERDTree<CR>

" Switch between splits
map <C-h> <c-w>h
map <C-l> <c-w>l
map <C-j> <c-w>j
map <C-k> <c-w>k

" Config
map <Leader>src <Action>(IdeaVim.ReloadVimRc.reload)
map <Leader>grc :e ~/.ideavimrc<CR>

map <leader>d <Action>(Debug)
map <leader>r <Action>(RenameElement)
map <leader>c <Action>(Stop)
map <leader>z <Action>(ToggleDistractionFreeMode)

map <leader>s <Action>(SelectInProjectView)
map <leader>a <Action>(Annotate)
map <leader>h <Action>(Vcs.ShowTabbedFileHistory)
map <S-Space> <Action>(GotoNextError)

" Reformat the current line only
map <leader>l V<Action>(ReformatCode)
map <leader>b <Action>(ToggleLineBreakpoint)
map <leader>o <Action>(FileStructurePopup)